<html>
    <head>
        <script src='/upper.js'></script>
    </head>
    <body>
        <input id="fileUpload" type="file" />
        <img id="preview" style="max-width:300px;" />
        <script>
            (function () {
                var upper = Upper();
                var uploader = upper.listen(window.document.getElementById('fileUpload'), {
                    meta: 'This is my meta data!'
                })
                .on('preview', function (url) {
                    window.document.getElementById('preview').setAttribute('src', url);
                })
                uploader.on('progress', function (progress) {
                    console.log(JSON.stringify(progress, null, 4));
                })
                uploader.on('completed', function (data) {
                    console.log(data);
                });
            })();
        </script>
    </body>
</html>
