(function () {
    'use strict';
    // RequireJS config and shim for libs
    require.config({
        paths: {
            'upper': '../upper',
			'module': './js/module'
        }
    });

    require(['upper'], function (Upper) {
        var upper = Upper(),
            uploader = upper.listen(window.document.getElementById('fileUpload'))

        .on('preview', function (url) {
            window.document.getElementById('preview').setAttribute('src', url);
        })
        .on('progress', function (progress) {
            console.log(JSON.stringify(progress, null, 4));
        })
        .on('completed', function (data) {
            console.log(data);
        });

    });
})();
